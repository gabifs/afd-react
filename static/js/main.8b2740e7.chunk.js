(this["webpackJsonpafd-react"]=this["webpackJsonpafd-react"]||[]).push([[0],{23:function(t,e,i){},26:function(t,e,i){},28:function(t,e,i){},29:function(t,e,i){"use strict";i.r(e);var s=i(2),n=i.n(s),r=i(17),a=i.n(r),c=(i(23),i(1)),o=i(4),l=i(12),u=i.n(l),d=(i(26),i(14)),h=i(3),j=i(18),f=i(10),_=i(11),b=function(){function t(e){if(Object(f.a)(this,t),this._disjoint_set=void 0,this._disjoint_set=[],e){var i,s=Object(h.a)(new Set(e));try{for(s.s();!(i=s.n()).done;){var n=i.value;this._disjoint_set.push([n])}}catch(r){s.e(r)}finally{s.f()}}}return Object(_.a)(t,[{key:"_get_index",value:function(t){var e,i=Object(h.a)(this._disjoint_set);try{for(i.s();!(e=i.n()).done;){var s,n=e.value,r=Object(h.a)(n);try{for(r.s();!(s=r.n()).done;){if(s.value===t)return this._disjoint_set.indexOf(n)}}catch(a){r.e(a)}finally{r.f()}}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"union",value:function(t,e){var i=this._get_index(t),s=this._get_index(e);i!==s&&(this._disjoint_set[i]=[].concat(Object(c.a)(this._disjoint_set[i]),Object(c.a)(this._disjoint_set[s])),this._disjoint_set=this._disjoint_set.filter((function(t,e){return e!==s})))}},{key:"get",value:function(){return this._disjoint_set}}]),t}(),v=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";Object(f.a)(this,t),this.grammar=void 0,this.grammarType=void 0,this.name=void 0,this.states=void 0,this.alphbet=void 0,this.productions=void 0,this.initialState=void 0,this.currentState=void 0,this.terminals=void 0,this.history=void 0,this.grammar=e,this.grammarType=i;var s=JSON.parse(e),n=s.name,r=s.states,a=s.alphbet,o=s.productions,l=s.initialState,u=s.terminals;this.name=n,this.states=r,this.alphbet=[""].concat(Object(c.a)(a)),this.productions=this._validatesProductions(o),this.initialState=this._validatesInitialState(l),this.terminals=this._validatesTerminals(u),this.currentState=l,this.history=[],this._minimization()}return Object(_.a)(t,[{key:"run",value:function(t){if(!t)return this.history=[[this.initialState,"",this.initialState]],this.terminals.includes(this.initialState);var e=Object(j.a)(t),i=e[0],s=e.slice(1),n=this.productions[this.currentState]?this.productions[this.currentState][i]:void 0;return this.history.push([this.currentState,i,n]),n?0!==s.length?(this._moveTo(n),this.run(s)):this.terminals.includes(n)?(this._moveTo(this.initialState),!0):(this._moveTo(this.initialState),!1):(this._moveTo(this.initialState),!1)}},{key:"_moveTo",value:function(t){return this.currentState=t,this.currentState}},{key:"_validatesProductions",value:function(t){var e=this;if(Object.keys(t).find((function(t){return!e.states.includes(t)})))throw new Error("Estado da produ\xe7\xe3o indefinido");var i=new Set(Object.values(t).reduce((function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(Object.values(e)))}),[]));if(Object(c.a)(i).find((function(t){return!e.states.includes(t)})))throw new Error("Estado da produ\xe7\xe3o indefinido");var s=new Set(Object.values(t).reduce((function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(Object.keys(e)))}),[]));if(Object(c.a)(s).find((function(t){return!e.alphbet.includes(t)})))throw new Error("Simbolo da produ\xe7\xe3o indefinido");return t}},{key:"_validatesInitialState",value:function(t){if(this.states.includes(t))return t;throw new Error("Estado inicial n\xe3o pertence ao conjunto de estados!")}},{key:"_validatesTerminals",value:function(t){var e=this;return t.map((function(t){if(e.states.includes(t))return t;throw new Error("Estado indefinido entre os estados terminais")}))}},{key:"_remove_unreachable_states",value:function(){for(var t=new Map,e=0,i=Object.keys(this.productions);e<i.length;e++){var s=i[e];t.set(s,[]);for(var n=0,r=Object.values(this.productions[s]);n<r.length;n++){var a=r[n];t.get(s).push(a)}}for(var o=[this.initialState],l=new Set;o.length;){var u=o.pop();!l.has(u)&&t.get(u)&&(o=[].concat(Object(c.a)(o),Object(c.a)(t.get(u)))),l.add(u)}this.states=this.states.filter((function(t){return l.has(t)})),this.terminals=this.terminals.filter((function(t){return l.has(t)})),this.productions=Object.fromEntries(Object.entries(this.productions).filter((function(t){return l.has(t[0])})))}},{key:"print",value:function(){console.log({name:this.name,states:this.states,alphbet:this.alphbet,productions:this.productions,initialState:this.initialState,terminals:this.terminals})}},{key:"_minimization",value:function(){var t=this;this.alphbet=this.alphbet.slice(1),this._remove_unreachable_states();var e=new Map,i=this.states.sort();i.forEach((function(s,n){i.slice(n+1).forEach((function(i){e.set([s,i].toString(),t.terminals.includes(s)!==t.terminals.includes(i))}))}));for(var s=!0;s;){s=!1;for(var n=0,r=Object.entries(i);n<r.length;n++){var a,l=Object(o.a)(r[n],2),u=l[0],d=l[1],j=Object(h.a)(i.slice(parseInt(u)+1));try{for(j.s();!(a=j.n()).done;){var f=a.value;if(!e.get([d,f].toString())){var _,v=Object(h.a)(this.alphbet);try{for(v.s();!(_=v.n()).done;){var m=_.value,p=this.productions[d][m]||null,O=this.productions[f][m]||null;if(p!==O&&p&&O){var y=[p,O].sort(),x=e.get(y.toString());if(s=s||x,e.set([d,f].toString(),x),x)break}}}catch(T){v.e(T)}finally{v.f()}}}}catch(T){j.e(T)}finally{j.f()}}}var w,g=new b(this.states),S=Object(h.a)(e.entries());try{for(S.s();!(w=S.n()).done;){var N=Object(o.a)(w.value,2),k=N[0],A=N[1],F=k.split(","),E=Object(o.a)(F,2),D=E[0],C=E[1];A||g.union(D,C)}}catch(T){S.e(T)}finally{S.f()}this.states=g.get().map((function(t){return t.reduce((function(t,e){return t+e}),"")})),this.initialState=this.states.filter((function(e){return e.includes(t.initialState)}))[0],this.terminals=this.states.filter((function(e){var i,s=!1,n=Object(h.a)(t.terminals);try{for(n.s();!(i=n.n()).done;){var r=i.value;s=s||e.includes(r)}}catch(T){n.e(T)}finally{n.f()}return s})),this._updateProductions(),this.alphbet=[""].concat(Object(c.a)(this.alphbet)),this.print()}},{key:"_updateProductions",value:function(){for(var t={},e=0,i=Object.entries(this.productions);e<i.length;e++){var s=Object(o.a)(i[e],2),n=s[0],r=s[1];t[this._findUnion(n)]?t[this._findUnion(n)]=Object(d.a)(Object(d.a)({},t[this._findUnion(n)]),this.productions[this._findUnion(n)]):t[this._findUnion(n)]=r}var a,c=Object(h.a)(this.states);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(t[l])for(var u=0,j=Object.keys(t[l]);u<j.length;u++){var f=j[u];t[l][f]=this._findUnion(t[l][f])}}}catch(_){c.e(_)}finally{c.f()}this.productions=t}},{key:"_findUnion",value:function(t){return this.states.filter((function(e){return e.includes(t)}))[0]}}]),t}(),m=i(0);function p(t){var e=Object(o.a)(t.grammarState,2),i=e[0],n=e[1],r=Object(s.useState)([{word:"",result:"disabled",history:[]}]),a=Object(o.a)(r,2),l=a[0],d=a[1];var h=function(t){switch(t.result){case"error":return Object(m.jsx)("span",{className:"nes-badge",children:Object(m.jsx)("span",{className:"is-error",children:"REJEITA"})});case"success":return Object(m.jsx)("span",{className:"nes-badge",children:Object(m.jsx)("span",{className:"is-success",children:"ACEITA"})});case"disabled":return Object(m.jsx)("span",{className:"nes-badge",children:Object(m.jsx)("span",{className:"is-dark",children:"_"})})}},j=function(t){var e=t.lastRound[1],i=t.lastRound[2];return window.__AFD__.alphbet.includes(e)?i?window.__AFD__.terminals.includes(i)?Object(m.jsx)("p",{className:"nes-text is-success",children:"Palavra aceita"}):Object(m.jsx)("p",{className:"nes-text is-error",children:"Estado final n\xe3o \xe9 terminal"}):Object(m.jsx)("p",{className:"nes-text is-error",children:"Produ\xe7\xe3o indefinida"}):Object(m.jsx)("p",{className:"nes-text is-error",children:"Simbolo n\xe3o pertence ao alfabeto"})};return Object(m.jsxs)("section",{id:"editor",children:[Object(m.jsxs)("div",{className:"editor__group1 nes-container is-rounded",children:[Object(m.jsxs)("nav",{className:"editor__controlsBar",children:[Object(m.jsx)("div",{className:"editor__editorControl",children:Object(m.jsxs)("label",{className:"nes-btn is-primary",children:[Object(m.jsx)("span",{children:"Selecione um arquivo"}),Object(m.jsx)("input",{type:"file",className:"editor__fileInput is-primary",onChange:function(t){t.preventDefault();var e=t.target.files[0];if(e)try{var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsText(e)}catch(s){u()("Erro",s.message,"error")}else u()("Nenhum arquivo")}})]})}),Object(m.jsx)("div",{className:"editor__editorControl",children:Object(m.jsx)("input",{type:"button",value:"Criar automato",className:"nes-btn is-success",onClick:function(){return function(t){try{window.__AFD__=new v(t),d(l.map((function(){return{word:"",result:window.__AFD__.run("")?"success":"error",history:window.__AFD__.history}})))}catch(e){u()("Erro na cria\xe7\xe3o",e.message,"error")}}(i)}})})]}),Object(m.jsx)("div",{className:"editor__textEditor nes-field",children:Object(m.jsx)("textarea",{name:"editor",cols:90,rows:20,value:i,onChange:function(t){t.preventDefault(),n(t.target.value)},spellCheck:"false",className:"nes-textarea",wrap:"soft"})})]}),Object(m.jsxs)("div",{className:"editor__group2 nes-container is-rounded",children:[Object(m.jsx)("input",{type:"button",value:"Add input",className:"nes-btn is-".concat(window.__AFD__?"warning":"disabled"),onClick:function(){d([].concat(Object(c.a)(l),[{word:"",result:window.__AFD__.run("")?"success":"error",history:window.__AFD__.history}]))}}),l.map((function(t,e){return Object(m.jsxs)("div",{className:"editor__wordsInputs nes-container is-rounded",children:[Object(m.jsxs)("div",{className:"editor__inputHeader",children:[Object(m.jsx)(h,{result:t.result}),Object(m.jsx)("button",{className:"nes-btn is-error",onClick:function(){return t=e,void d(l.filter((function(e,i){return t!==i})));var t},children:"X"})]}),Object(m.jsx)("input",{type:"text",value:t.word,onChange:function(t){return i=e,s=t.target.value,void d(l.map((function(t,e){return window.__AFD__?e===i?(window.__AFD__.history=[],window.__AFD__.run(s)?{word:s,result:"success",history:window.__AFD__.history}:{word:s,result:"error",history:window.__AFD__.history}):t:{word:"",result:"disabled",history:[]}})));var i,s},className:"nes-input is-".concat(t.result),placeholder:window.__AFD__?"Palavra vazia":"Crie um Automato"}),Object(m.jsxs)("details",{style:{marginTop:"1rem"},children:[Object(m.jsx)("summary",{children:"Hist\xf3rico"}),Object(m.jsxs)("div",{className:"nes-container is-rounded is-dark",style:{textAlign:"center"},children:[t.history.map((function(t,e){var i=Object(o.a)(t,3),s=i[0],n=i[1],r=i[2];return Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{className:"nes-text is-warning",children:"".concat(e+1,") ")}),Object(m.jsx)("strong",{className:"nes-text is-success",children:s}),r?Object(m.jsxs)(m.Fragment,{children:["|",Object(m.jsx)("span",{className:"nes-text is-primary",children:"(".concat(n,")")}),"|",Object(m.jsx)("strong",{className:"nes-text is-success",children:r})]}):Object(m.jsxs)(m.Fragment,{children:["|",Object(m.jsx)("span",{className:"nes-text is-error",children:"(".concat(n,")")})]})]},e)})),t.history.length?Object(m.jsx)(j,{lastRound:t.history[t.history.length-1]}):""]})]})]},e)}))]})]})}i(28);var O=function(){var t=Object(s.useState)("");return Object(m.jsx)("main",{className:"App",children:Object(m.jsx)(p,{grammarState:t})})},y=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,30)).then((function(e){var i=e.getCLS,s=e.getFID,n=e.getFCP,r=e.getLCP,a=e.getTTFB;i(t),s(t),n(t),r(t),a(t)}))};a.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root")),y()}},[[29,1,2]]]);
//# sourceMappingURL=main.8b2740e7.chunk.js.map