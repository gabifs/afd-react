(this["webpackJsonpafd-react"]=this["webpackJsonpafd-react"]||[]).push([[0],{24:function(t,e,i){},27:function(t,e,i){},29:function(t,e,i){},30:function(t,e,i){"use strict";i.r(e);var s=i(4),n=i.n(s),r=i(18),a=i.n(r),c=(i(24),i(1)),o=i(2),l=i(6),d=i.n(l),u=(i(27),i(7)),h=i(9),j=i(3),_=i(19),f=i(13),b=i(14),m=function(){function t(e){if(Object(f.a)(this,t),this._disjoint_set=void 0,this._disjoint_set=[],e){var i,s=Object(j.a)(new Set(e));try{for(s.s();!(i=s.n()).done;){var n=i.value;this._disjoint_set.push([n])}}catch(r){s.e(r)}finally{s.f()}}}return Object(b.a)(t,[{key:"_get_index",value:function(t){var e,i=Object(j.a)(this._disjoint_set);try{for(i.s();!(e=i.n()).done;){var s,n=e.value,r=Object(j.a)(n);try{for(r.s();!(s=r.n()).done;){if(s.value===t)return this._disjoint_set.indexOf(n)}}catch(a){r.e(a)}finally{r.f()}}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"union",value:function(t,e){var i=this._get_index(t),s=this._get_index(e);i!==s&&(this._disjoint_set[i]=[].concat(Object(c.a)(this._disjoint_set[i]),Object(c.a)(this._disjoint_set[s])),this._disjoint_set=this._disjoint_set.filter((function(t,e){return e!==s})))}},{key:"get",value:function(){return this._disjoint_set}}]),t}(),v=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";Object(f.a)(this,t),this.grammar=void 0,this.grammarType=void 0,this.name=void 0,this.states=void 0,this.alphbet=void 0,this.productions=void 0,this.initialState=void 0,this.currentState=void 0,this.terminals=void 0,this.history=void 0,this.grammar=e,this.grammarType=i;var s=JSON.parse(e),n=s.name,r=s.states,a=s.alphbet,o=s.productions,l=s.initialState,d=s.terminals;this.name=n,this.states=r,this.alphbet=[""].concat(Object(c.a)(a)),this.productions=this._validatesProductions(o),this.initialState=this._validatesInitialState(l),this.terminals=this._validatesTerminals(d),this.history=[],this._minimization(),this.currentState=l}return Object(b.a)(t,[{key:"run",value:function(t){if(!t)return this.history=[[this.initialState,"",this.initialState]],this.terminals.includes(this.initialState);var e=Object(_.a)(t),i=e[0],s=e.slice(1),n=this.productions[this.currentState]?this.productions[this.currentState][i]:void 0;return this.history.push([this.currentState,i,n]),n?0!==s.length?(this._moveTo(n),this.run(s)):this.terminals.includes(n)?(this._moveTo(this.initialState),!0):(this._moveTo(this.initialState),!1):(this._moveTo(this.initialState),!1)}},{key:"_moveTo",value:function(t){return this.currentState=t,this.currentState}},{key:"_validatesProductions",value:function(t){var e=this;if(Object.keys(t).find((function(t){return!e.states.includes(t)})))throw new Error("Estado da produ\xe7\xe3o indefinido");var i=new Set(Object.values(t).reduce((function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(Object.values(e)))}),[]));if(Object(c.a)(i).find((function(t){return!e.states.includes(t)})))throw new Error("Estado da produ\xe7\xe3o indefinido");var s=new Set(Object.values(t).reduce((function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(Object.keys(e)))}),[]));if(Object(c.a)(s).find((function(t){return!e.alphbet.includes(t)})))throw new Error("Simbolo da produ\xe7\xe3o indefinido");return t}},{key:"_validatesInitialState",value:function(t){if(this.states.includes(t))return t;throw new Error("Estado inicial n\xe3o pertence ao conjunto de estados!")}},{key:"_validatesTerminals",value:function(t){var e=this;return t.map((function(t){if(e.states.includes(t))return t;throw new Error("Estado indefinido entre os estados terminais")}))}},{key:"_remove_unreachable_states",value:function(){for(var t=new Map,e=0,i=Object.keys(this.productions);e<i.length;e++){var s=i[e];t.set(s,[]);for(var n=0,r=Object.values(this.productions[s]);n<r.length;n++){var a=r[n];t.get(s).push(a)}}for(var o=[this.initialState],l=new Set;o.length;){var d=o.pop();!l.has(d)&&t.get(d)&&(o=[].concat(Object(c.a)(o),Object(c.a)(t.get(d)))),l.add(d)}this.states=this.states.filter((function(t){return l.has(t)})),this.terminals=this.terminals.filter((function(t){return l.has(t)})),this.productions=Object.fromEntries(Object.entries(this.productions).filter((function(t){return l.has(t[0])})))}},{key:"print",value:function(){console.log({name:this.name,states:this.states,alphbet:this.alphbet,productions:this.productions,initialState:this.initialState,terminals:this.terminals})}},{key:"_minimization",value:function(){var t=this;this.alphbet=this.alphbet.slice(1),this._remove_unreachable_states(),this._addReject();var e=new Map,i=Object(c.a)(this.states);i.forEach((function(s,n){i.slice(n+1).forEach((function(i){e.set([s,i].toString(),t.terminals.includes(s)!==t.terminals.includes(i))}))}));for(var s=!0;s;){s=!1;for(var n=0,r=Object.entries(i);n<r.length;n++){var a,l=Object(o.a)(r[n],2),d=l[0],u=l[1],h=Object(j.a)(i.slice(parseInt(d)+1));try{for(h.s();!(a=h.n()).done;){var _=a.value;if(!e.get([u,_].toString())){var f,b=Object(j.a)(this.alphbet);try{for(b.s();!(f=b.n()).done;){var v=f.value,p=this.productions[u][v],O=this.productions[_][v];if(p!==O){var w=[p,O],x=e.get(w.toString());if(s=s||x,e.set([u,_].toString(),x),x)break}}}catch(T){b.e(T)}finally{b.f()}}}}catch(T){h.e(T)}finally{h.f()}}}var y,g=new m(this.states),N=Object(j.a)(e.entries());try{for(N.s();!(y=N.n()).done;){var S=Object(o.a)(y.value,2),F=S[0],A=S[1],k=F.split(","),E=Object(o.a)(k,2),D=E[0],C=E[1];A||g.union(D,C)}}catch(T){N.e(T)}finally{N.f()}this.states=g.get().map((function(t){return t.reduce((function(t,e){return t?t+"^"+e:e}),"")})),this.initialState=this.states.filter((function(e){return e.split("^").includes(t.initialState)}))[0],this.terminals=this.states.filter((function(e){var i,s=!1,n=Object(j.a)(t.terminals);try{for(n.s();!(i=n.n()).done;){var r=i.value;s=s||e.split("^").includes(r)}}catch(T){n.e(T)}finally{n.f()}return s})),this._updateProductions(),this.alphbet=[""].concat(Object(c.a)(this.alphbet)),this.print()}},{key:"_updateProductions",value:function(){for(var t={},e=0,i=Object.entries(this.productions);e<i.length;e++){var s=Object(o.a)(i[e],2),n=s[0],r=s[1];t[this._findUnion(n)]?t[this._findUnion(n)]=Object(h.a)(Object(h.a)({},t[this._findUnion(n)]),this.productions[this._findUnion(n)]):t[this._findUnion(n)]=r}var a,c=Object(j.a)(this.states);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(t[l])for(var d=0,u=Object.keys(t[l]);d<u.length;d++){var _=u[d];t[l][_]=this._findUnion(t[l][_])}}}catch(f){c.e(f)}finally{c.f()}this.productions=t}},{key:"_findUnion",value:function(t){return this.states.filter((function(e){return e.split("^").includes(t)}))[0]}},{key:"_addReject",value:function(){this.states=[].concat(Object(c.a)(this.states),["REJECT"]);var t,e=Object(j.a)(this.states);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.productions[i]||(this.productions[i]={});var s,n=Object(j.a)(this.alphbet);try{for(n.s();!(s=n.n()).done;){var r=s.value;this.productions[i][r]||(this.productions[i]=Object(h.a)(Object(h.a)({},this.productions[i]),{},Object(u.a)({},r,"REJECT")))}}catch(a){n.e(a)}finally{n.f()}}}catch(a){e.e(a)}finally{e.f()}}}]),t}();var p=i(0);function O(t){var e=Object(o.a)(t.grammarState,2),i=e[0],n=e[1],r=Object(s.useState)([{word:"",result:"disabled",history:[]}]),a=Object(o.a)(r,2),l=a[0],h=a[1],_=Object(s.useState)([["",""]]),f=Object(o.a)(_,2),b=f[0],m=f[1];function O(t){try{window.__AFD__=new v(function(t){var e={name:"",states:[],alphbet:[],productions:{},initialState:"",terminals:[]};try{var i=t.split("\n"),s=i[0].split("=({"),n=Object(o.a)(s,2),r=n[0],a=n[1];e.name=r.trim();var c=a.split("},{"),l=Object(o.a)(c,2),d=l[0],h=l[1];e.states=d.split(",").map((function(t){return t.trim()}));var _=h.split("},"),f=Object(o.a)(_,2),b=f[0],m=f[1];e.alphbet=b.split(",").map((function(t){return t.trim()}));var v=m.split(","),p=Object(o.a)(v,3),O=p[0],w=p[1],x=p[2];e.initialState=w.trim();var y=x.slice(1,x.length-2).split(",");if(e.terminals=y.map((function(t){return t.trim()})),O!==i[1])throw new Error("Nome das produ\xe7\xf5es errado");var g,N=Object(j.a)(i.slice(2));try{for(N.s();!(g=N.n()).done;){var S=g.value;if(S.length){var F=(S=S.trim()).slice(1).split(")=").map((function(t){return t.trim()})),A=Object(o.a)(F,2),k=A[0],E=A[1],D=k.split(",").map((function(t){return t.trim()})),C=Object(o.a)(D,2),T=C[0],I=C[1];e.productions[T]?e.productions[T][I]=E:e.productions[T]=Object(u.a)({},I,E)}}}catch(R){N.e(R)}finally{N.f()}return JSON.stringify(e)}catch(R){throw new Error("Formato de entrada errado")}}(t)),h(l.map((function(){return{word:"",result:window.__AFD__.run("")?"success":"error",history:window.__AFD__.history}})))}catch(e){d()("Erro na cria\xe7\xe3o",e.message,"error")}}var w=function(t){switch(t.result){case"error":return Object(p.jsx)("span",{className:"nes-badge",children:Object(p.jsx)("span",{className:"is-error",children:"REJEITA"})});case"success":return Object(p.jsx)("span",{className:"nes-badge",children:Object(p.jsx)("span",{className:"is-success",children:"ACEITA"})});case"disabled":return Object(p.jsx)("span",{className:"nes-badge",children:Object(p.jsx)("span",{className:"is-dark",children:"_"})})}},x=function(t){var e=t.lastRound[1],i=t.lastRound[2];return window.__AFD__.alphbet.includes(e)?i?window.__AFD__.terminals.includes(i)?Object(p.jsx)("p",{className:"nes-text is-success",children:"Palavra aceita"}):Object(p.jsx)("p",{className:"nes-text is-error",children:"Estado final n\xe3o \xe9 terminal"}):Object(p.jsx)("p",{className:"nes-text is-error",children:"Produ\xe7\xe3o indefinida"}):Object(p.jsx)("p",{className:"nes-text is-error",children:"Simbolo n\xe3o pertence ao alfabeto"})};return Object(p.jsxs)("section",{id:"editor",children:[Object(p.jsxs)("div",{className:"editor__group1 nes-container is-rounded",children:[Object(p.jsxs)("nav",{className:"editor__controlsBar",children:[Object(p.jsx)("div",{className:"editor__editorControl",children:Object(p.jsxs)("label",{className:"nes-btn is-primary",children:[Object(p.jsx)("span",{children:"Selecione um arquivo"}),Object(p.jsx)("input",{type:"file",className:"editor__fileInput is-primary",onChange:function(t){t.preventDefault();var e=t.target.files[0];if(e)try{var i=new FileReader;i.onloadend=function(){n(i.result)},i.readAsText(e)}catch(s){d()("Erro",s.message,"error")}else d()("Nenhum arquivo")}})]})}),Object(p.jsx)("div",{className:"editor__editorControl",children:Object(p.jsx)("input",{type:"button",value:"Criar automato",className:"nes-btn is-success",onClick:function(){return O(i)}})})]}),Object(p.jsx)("div",{className:"editor__textEditor nes-field",children:Object(p.jsx)("textarea",{name:"editor",cols:90,rows:20,value:i,onChange:function(t){t.preventDefault(),n(t.target.value)},spellCheck:"false",className:"nes-textarea",wrap:"soft"})})]}),Object(p.jsxs)("div",{className:"editor__group2 nes-container is-rounded",children:[Object(p.jsx)("input",{type:"button",value:"Add input",className:"nes-btn is-".concat(window.__AFD__?"warning":"disabled"),onClick:function(){return!!window.__AFD__&&void h([].concat(Object(c.a)(l),[{word:"",result:window.__AFD__.run("")?"success":"error",history:window.__AFD__.history}]))}}),l.map((function(t,e){return Object(p.jsxs)("div",{className:"editor__wordsInputs nes-container is-rounded",children:[Object(p.jsxs)("div",{className:"editor__inputHeader",children:[Object(p.jsx)(w,{result:t.result}),Object(p.jsx)("button",{className:"nes-btn is-error",onClick:function(){return t=e,void h(l.filter((function(e,i){return t!==i})));var t},children:"X"})]}),Object(p.jsx)("input",{type:"text",value:t.word,onChange:function(t){return i=e,s=t.target.value,void h(l.map((function(t,e){return window.__AFD__?e===i?(window.__AFD__.history=[],window.__AFD__.run(s)?{word:s,result:"success",history:window.__AFD__.history}:{word:s,result:"error",history:window.__AFD__.history}):t:{word:"",result:"disabled",history:[]}})));var i,s},className:"nes-input is-".concat(t.result),placeholder:window.__AFD__?"Palavra vazia":"Crie um Automato"}),Object(p.jsxs)("details",{style:{marginTop:"1rem"},children:[Object(p.jsx)("summary",{children:"Hist\xf3rico"}),Object(p.jsxs)("div",{className:"nes-container is-rounded is-dark",style:{textAlign:"center"},children:[t.history.map((function(t,e){var i=Object(o.a)(t,3),s=i[0],n=i[1],r=i[2];return Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{className:"nes-text is-warning",children:"".concat(e+1,") ")}),Object(p.jsx)("strong",{className:"nes-text is-success",children:s}),r?Object(p.jsxs)(p.Fragment,{children:["|",Object(p.jsx)("span",{className:"nes-text is-primary",children:"(".concat(n,")")}),"|",Object(p.jsx)("strong",{className:"nes-text is-success",children:r})]}):Object(p.jsxs)(p.Fragment,{children:["|",Object(p.jsx)("span",{className:"nes-text is-error",children:"(".concat(n,")")})]})]},e)})),t.history.length?Object(p.jsx)(x,{lastRound:t.history[t.history.length-1]}):""]})]})]},e)}))]}),Object(p.jsxs)("div",{className:"editor__group3 nes-container is-rounded",children:[Object(p.jsx)("div",{className:"editor__editorControl",children:Object(p.jsxs)("label",{className:"nes-btn is-".concat(window.__AFD__?"primary":"disabled"),children:[Object(p.jsx)("span",{children:"Lista de duplas de palavras"}),Object(p.jsx)("input",{type:"file",className:"editor__fileInput",onChange:window.__AFD__?function(t){t.preventDefault();var e=t.target.files[0];if(e)try{var i=new FileReader;i.onloadend=function(){m(function(t){try{return t.trim().split("\n").map((function(t){if((t=t.trim()).match(/\(.+,.+\)/)&&!t.match(/\(.+,.*,\)/))return t.slice(1,t.length-1).split(",").map((function(t){return t.trim()}));throw new Error("entrada errada")}))}catch(e){d()("Erro Formato",e.message,"error")}}(i.result)||[["",""]])},i.readAsText(e)}catch(s){d()("Erro",s.message,"error")}else d()("Nenhum arquivo")}:function(){return!1}})]})}),Object(p.jsxs)("div",{className:"editor__wordTupleView",children:[Object(p.jsxs)("div",{className:"editor__listView lists nes-container is-rounded is-dark",children:[Object(p.jsx)("h3",{children:"Input"}),Object(p.jsx)("ul",{className:"is-circle",children:b.map((function(t,e){return!!window.__AFD__&&(window.__AFD__.run(t[0])&&window.__AFD__.run(t[1])?Object(p.jsx)("li",{className:"nes-text is-primary",children:"(".concat(t[0],", ").concat(t[1],")")},e):Object(p.jsx)("li",{className:"nes-text is-error",children:"(".concat(t[0],", ").concat(t[1],")")},e))}))})]}),Object(p.jsxs)("div",{className:"editor__listView lists nes-container is-rounded is-dark",children:[Object(p.jsx)("h3",{children:"Output"}),Object(p.jsx)("ul",{className:"is-circle",children:b.filter((function(t){return!!window.__AFD__&&(window.__AFD__.run(t[0])&&window.__AFD__.run(t[0]))})).map((function(t,e){return Object(p.jsx)("li",{className:"nes-text is-success",children:"(".concat(t[0],", ").concat(t[1],")")},e)}))})]})]})]})]})}i(29);var w=function(){var t=Object(s.useState)("");return Object(p.jsx)("main",{className:"App",children:Object(p.jsx)(O,{grammarState:t})})},x=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,31)).then((function(e){var i=e.getCLS,s=e.getFID,n=e.getFCP,r=e.getLCP,a=e.getTTFB;i(t),s(t),n(t),r(t),a(t)}))};a.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.84c67676.chunk.js.map